<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' href='/blogStyle.css' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" 
    integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" 
    integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>Blogs</title>
</head>
<body>
    <div class="main-top">
        <a href="/myblog/main/homepage"><h2 class="word1">Home</h2>
        <a href="/myblog/main/my_blogs"><h2 class="word2">Profile</h2></a>
    </div>

    <div class="higher-area">
    <h2><%=blogtitle%></h2>
      <p style="text-decoration: underline;">by <%=userEmail%></p>
      <i class="fa fa-heart"></i><span id="heart-count"><%=likes%></span>
    </div>
          <img class="blog-image" src ="<%=image%>"class="center img-fluid img-thumbnail" width ="400" height="250">
            <p class="imagetitle" style="color:antiquewhite"><%=imagetitle%></p>
         <div class="lower-area">
                
                  <h4 class="blogsubheader" style="text-align: center"><%=blogsubheader%></h4>
                    <p id="summary-text" style="text-align: center"><%=blog%></p>   
                    
                    
                  <div class="comments">
                      <h6 style="font-weight: bold; text-decoration: underline;">Comments</h6>
                         <% comment.forEach(function(comment, index){ %>   
                            <p><%=comment.commentor%>: <%=comment.comment%>
                            <button onclick="console.log(deleteComment); deleteComment('<%=index%>')"><i class="fa fa-trash"></i>
                         </button>
                  <%})%> 
                               
                   
                </div>
      </div>
         
               <script>
                      function deleteComment (index) {
                          fetch(`/myblog/comment/<%=blogId%>/?commentId=${index}`,{
                            method: 'DELETE'
                          }).then(window.location.pathname="/myblog/main/my_blogs/<%=blogId%>")
                          .then(html => console.log(html))
                          .catch(err => console.error(err))
                      }
              </script>
         <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
         <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>